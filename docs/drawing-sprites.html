<!DOCTYPE html SYSTEM "about:legacy-compat">
<html lang="en-US" data-preset="contrast" data-primary-color="#307FFF"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="UTF-8"><meta name="built-on" content="2024-12-31T22:13:53.820869"><title>Drawing Sprites | Amphora Docs</title><script type="application/json" id="virtual-toc-data">[{"id":"creating-sprites","level":0,"title":"Creating Sprites","anchor":"#creating-sprites"},{"id":"creating-framesets","level":0,"title":"Creating Framesets","anchor":"#creating-framesets"},{"id":"selecting-framesets","level":0,"title":"Selecting Framesets","anchor":"#selecting-framesets"},{"id":"freeing-sprites","level":0,"title":"Freeing Sprites","anchor":"#freeing-sprites"}]</script><script type="application/json" id="topic-shortcuts"></script><link href="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b575/app.css" rel="stylesheet"><meta name="msapplication-TileColor" content="#000000"><link rel="apple-touch-icon" sizes="180x180" href="https://jetbrains.com/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://jetbrains.com/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://jetbrains.com/favicon-16x16.png"><meta name="msapplication-TileImage" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-144x144.png"><meta name="msapplication-square70x70logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-70x70.png"><meta name="msapplication-square150x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-150x150.png"><meta name="msapplication-wide310x150logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x150.png"><meta name="msapplication-square310x310logo" content="https://resources.jetbrains.com/storage/ui/favicons/mstile-310x310.png"><meta name="image" content=""><!-- Open Graph --><meta property="og:title" content="Drawing Sprites | Amphora Docs"><meta property="og:description" content=""><meta property="og:image" content=""><meta property="og:site_name" content="Amphora Docs Help"><meta property="og:type" content="website"><meta property="og:locale" content="en_US"><meta property="og:url" content="writerside-documentation/drawing-sprites.html"><!-- End Open Graph --><!-- Twitter Card --><meta name="twitter:card" content="summary_large_image"><meta name="twitter:site" content=""><meta name="twitter:title" content="Drawing Sprites | Amphora Docs"><meta name="twitter:description" content=""><meta name="twitter:creator" content=""><meta name="twitter:image:src" content=""><!-- End Twitter Card --><!-- Schema.org WebPage --><script type="application/ld+json">{
    "@context": "http://schema.org",
    "@type": "WebPage",
    "@id": "writerside-documentation/drawing-sprites.html#webpage",
    "url": "writerside-documentation/drawing-sprites.html",
    "name": "Drawing Sprites | Amphora Docs",
    "description": "",
    "image": "",
    "inLanguage":"en-US"
}</script><!-- End Schema.org --><!-- Schema.org WebSite --><script type="application/ld+json">{
    "@type": "WebSite",
    "@id": "writerside-documentation/#website",
    "url": "writerside-documentation/",
    "name": "Amphora Docs Help"
}</script><!-- End Schema.org --></head><body data-id="Drawing-Sprites" data-main-title="Drawing Sprites" data-article-props="{&quot;seeAlsoStyle&quot;:&quot;links&quot;}" data-template="article" data-breadcrumbs=""><div class="wrapper"><main class="panel _main"><header class="panel__header"><div class="container"><h3>Amphora Docs  Help</h3><div class="panel-trigger"></div></div></header><section class="panel__content"><div class="container"><article class="article" data-shortcut-switcher="inactive"><h1 data-toc="Drawing-Sprites" id="Drawing-Sprites.md">Drawing Sprites</h1><p id="-clx12f_3">Sprites in Amphora consist of two parts: an <code class="code" id="-clx12f_10">AmphoraImage</code> pointer, and any number of framesets.</p><p id="-clx12f_4">The <code class="code" id="-clx12f_11">AmphoraImage</code> contains data such as the spritesheet resource to pull from, the coordinates, the scale factor, and the flip state of the current sprite.</p><p id="-clx12f_5">A frameset describes an animated state that an <code class="code" id="-clx12f_12">AmphoraImage</code> can be in. Each frameset specifies a unique name, the frames to be used in its animation, and the delay between animation frames. An object in your game might have many framesets attached to it, for example, idle, walking, jumping, falling, and attacking would all be separate framesets, each describing the animation for its state.</p><section class="chapter"><h2 id="creating-sprites" data-toc="creating-sprites">Creating Sprites</h2><p id="-clx12f_13">First, you'll create an <code class="code" id="-clx12f_19">AmphoraImage</code> pointer and ensure it's set to <code class="code" id="-clx12f_20">NULL</code>.</p><div class="tabs" id="-clx12f_14" data-anchors="[-clx12f_21,-clx12f_22]"><div class="tabs__content" data-gtm="tab" id="-clx12f_21" data-title="C"><div class="code-block" data-lang="c" data-title="C">
            AmphoraImage *my_img = NULL;
        </div></div><div class="tabs__content" data-gtm="tab" id="-clx12f_22" data-title="C++"><div class="code-block" data-lang="cpp" data-title="C++">
            AmphoraImage *my_img = nullptr;
        </div></div></div><p> Sprites are created using the `create_sprite` function: </p><div class="code-block" data-lang="c">
AmphoraImage *create_sprite(AmphoraImage **spr, const char *image_name, float x, float y, float scale, bool flip, bool stationary, Sint32 order);
</div><p id="-clx12f_16">Creating an <code class="code" id="-clx12f_25">AmphoraImage</code> with <code class="code" id="-clx12f_26">create_sprite</code> will automatically add it to the render list to be displayed.</p><p id="-clx12f_17">If <code class="code" id="-clx12f_27">create_sprite</code> succeeds, the passed in <code class="code" id="-clx12f_28">AmphoraImage</code> pointer will be set to the newly created <code class="code" id="-clx12f_29">AmphoraImage</code>, and the pointer will be returned as well. If it fails, it will return <code class="code" id="-clx12f_30">NULL</code> and the supplied pointer will not be modified.</p><section class="chapter"><h3 id="params_create_sprite" data-toc="params_create_sprite">Description of Parameters</h3><ul class="list _bullet" id="-clx12f_31"><li class="list__item" id="-clx12f_32"><p>The <code class="code" id="-clx12f_39">spr</code> parameter is a pointer to an <code class="code" id="-clx12f_40">AmphoraImage</code> pointer. This pointer should be <code class="code" id="-clx12f_41">NULL</code>, otherwise the function will simply return it as is and not create the new <code class="code" id="-clx12f_42">AmphoraImage</code>.</p></li><li class="list__item" id="-clx12f_33"><p>The <code class="code" id="-clx12f_43">image_name</code> parameter is the name of the image resource specified in <code class="code" id="-clx12f_44">resources.h</code>. The <code class="code" id="-clx12f_45">AmphoraImage</code> does not contain any texture data itself, it uses the image supplied here and draws portions of it based on the coordinates specified in a frameset.</p></li><li class="list__item" id="-clx12f_34"><p>The <code class="code" id="-clx12f_46">x</code> and <code class="code" id="-clx12f_47">y</code> parameters determine the initial position of the <code class="code" id="-clx12f_48">AmphoraImage</code>. This will be the upper left corner. If <code class="code" id="-clx12f_49">stationary</code> is true, these values will be the distance from the window/screen edge to the image, with positive x and y values starting from the left and top edges, and negative x and y values starting from the right and bottom edges.</p></li><li class="list__item" id="-clx12f_35"><p>The <code class="code" id="-clx12f_50">scale</code> parameter is used to scale the image drawn. For example, a scale parameter of 2 would cause the image to be drawn with its width and heights doubled.</p></li><li class="list__item" id="-clx12f_36"><p>The <code class="code" id="-clx12f_51">flip</code> parameter controls whether or not the image is drawn flipped horizontally.</p></li><li class="list__item" id="-clx12f_37"><p>The <code class="code" id="-clx12f_52">stationary</code> parameter determines whether the image should be stationary. Similarly to strings, a stationary image is positioned relative to the window/screen edges and its position on screen will not change. For example, a health display would be stationary, an enemy monster would not.</p></li><li class="list__item" id="-clx12f_38"><p>The <code class="code" id="-clx12f_53">order</code> parameter controls the draw order of all drawable objects, with higher numbers drawing on top of lower numbers.</p></li></ul></section></section><section class="chapter"><h2 id="creating-framesets" data-toc="creating-framesets">Creating Framesets</h2><p id="-clx12f_54">Once an <code class="code" id="-clx12f_57">AmphoraImage</code> is created, you'll need to add a frameset to it. This is done with the <code class="code" id="-clx12f_58">add_frameset</code> function:</p><div class="code-block" data-lang="c">
void add_frameset(AmphoraImage *spr, const char *name, Sint32 sx, Sint32 sy, Sint32 w, Sint32 h, float off_x, float off_y, Uint16 num_frames, Uint16 delay);
</div><section class="chapter"><h3 id="params_frameset" data-toc="params_frameset">Description of Parameters</h3><ul class="list _bullet" id="-clx12f_59"><li class="list__item" id="-clx12f_62"><p>The <code class="code" id="-clx12f_66">spr</code> parameter to which the created frameset should be attached.</p></li><li class="list__item" id="-clx12f_63"><p>The <code class="code" id="-clx12f_67">name</code> parameter is the name of the frameset to be created. This must be unique among framesets attached to any given <code class="code" id="-clx12f_68">AmphoraImage</code>, but different <code class="code" id="-clx12f_69">AmphoraImage</code> instances can have framesets with identical names (ie. an <code class="code" id="-clx12f_70">AmpohraImage</code> player1 cannot have two framesets both called idle, but player1 and player2 can each have a frameset called idle).</p></li><li class="list__item" id="-clx12f_64"><p>The <code class="code" id="-clx12f_71">sx</code> and <code class="code" id="-clx12f_72">sy</code> parameters are the upper left pixel of the first frame of the animation described by the frameset on the spritesheet named in the <code class="code" id="-clx12f_73">AmphoraImage</code> <code class="code" id="-clx12f_74">name</code> parameter.</p></li><li class="list__item" id="-clx12f_65"><p>The <code class="code" id="-clx12f_75">w</code> and <code class="code" id="-clx12f_76">h</code> parameters are the width and height of the frames for the described animation.</p></li></ul><aside class="prompt" data-type="warning" data-title="" id="-clx12f_60"><p>In any given animation, each frame must be of the same dimensions</p></aside><ul class="list _bullet" id="-clx12f_61"><li class="list__item" id="-clx12f_77"><p>The <code class="code" id="-clx12f_80">off_x</code> and <code class="code" id="-clx12f_81">off_y</code> parameters specify a pixel offset to be applied to the frames in an animation. These numbers will be subtracted from the position of the <code class="code" id="-clx12f_82">AmphoraImage</code>. Typically, these will be used to maintain the relative center of a sprite when switching between framesets of different sizes. For example, a sprite's idle animation may be 16x32 pixels, but the attack animation might be 32x32 pixels to accommodate a sword swing. In this case, switching from an idle state to an attack state would move the visible image to the right. One would use <code class="code" id="-clx12f_83">off_x</code> here to maintain the proper position when switching between the framesets.</p></li><li class="list__item" id="-clx12f_78"><p>The <code class="code" id="-clx12f_84">num_frames</code> parameter specifies the number of frames in the animation. These will be read sequentially, left-to-right from the spritesheet, starting from the initial frame specified by <code class="code" id="-clx12f_85">sx</code>, <code class="code" id="-clx12f_86">sy</code>, <code class="code" id="-clx12f_87">w</code>, and <code class="code" id="-clx12f_88">h</code>. If your frameset is a static image that is not animated, you would set this to 1.</p></li><li class="list__item" id="-clx12f_79"><p>The <code class="code" id="-clx12f_89">delay</code> parameter specifies the number of milliseconds between each animation frame change. If your frameset is a static image that is not animated, this value does not matter and can just be set to 0.</p></li></ul></section></section><section class="chapter"><h2 id="selecting-framesets" data-toc="selecting-framesets">Selecting Framesets</h2><p id="-clx12f_90">There are two methods to set the active frameset for an <code class="code" id="-clx12f_94">AmphoraImage</code>: <code class="code" id="-clx12f_95">set_frameset</code>, and <code class="code" id="-clx12f_96">play_oneshot</code>.</p><div class="code-block" data-lang="c">
void set_frameset(AmphoraImage *spr, const char *name);
void play_oneshot(AmphoraImage *spr, const char *name, void (*callback)(void));
</div><p id="-clx12f_92">In both of these, <code class="code" id="-clx12f_97">spr</code> is the <code class="code" id="-clx12f_98">AmphoraImage</code> and <code class="code" id="-clx12f_99">name</code> is the name of the frameset that's previously been created.</p><p id="-clx12f_93">The difference between the two is that <code class="code" id="-clx12f_100">set_frameset</code> will loop the animation, while <code class="code" id="-clx12f_101">play_oneshot</code> will play the animation once, holding on the last frame, and will execute a supplied callback function once the animation finishes. This callback function is a standard C function pointer to a function that takes no parameters and returns void, or it can be a non-trapping lambda if using C++. If you do not wish to execute a callback function, pass <code class="code" id="-clx12f_102">NULL</code> in C or <code class="code" id="-clx12f_103">nullptr</code> in C++.</p></section><section class="chapter"><h2 id="freeing-sprites" data-toc="freeing-sprites">Freeing Sprites</h2><p id="-clx12f_104">Freeing sprites is done with the <code class="code" id="-clx12f_109">free_sprite</code> function:</p><div class="code-block" data-lang="c">
void free_sprite(AmphoraImage **spr);
</div><p id="-clx12f_106">This will free all resources associated the specified <code class="code" id="-clx12f_110">AmphoraImage</code> and reset the pointer to <code class="code" id="-clx12f_111">NULL</code>.</p><aside class="prompt" data-type="warning" data-title="" id="-clx12f_107"><p>Note the <code class="code" id="-clx12f_112">AmphoraImage **</code> here. As a general rule of thumb, functions that create or destroy Ampohra's opaque internal structures take pointers to pointers, while functions that read from or modify those structures take standard pointers.</p></aside><p id="-clx12f_108">All existing images are freed automatically on exit, so it is only necessary to manually free images that you no longer need (ie. an enemy that the player defeated).</p></section><div class="last-modified">Last modified: 01 January 2025</div><div data-feedback-placeholder="true"></div><div class="navigation-links _bottom"><a href="drawing-text.html" class="navigation-links__prev">Drawing Text</a><a href="drawing-a-tilemap.html" class="navigation-links__next">Drawing a Tilemap</a></div></article><div id="disqus_thread"></div></div></section></main></div><script src="https://resources.jetbrains.com/writerside/apidoc/6.10.0-b575/app.js"></script></body></html>